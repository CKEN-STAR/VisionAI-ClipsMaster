{
  "test_summary": {
    "total_tests": 11,
    "passed_tests": 8,
    "failed_tests": 3,
    "success_rate": 72.72727272727273,
    "narrative_tests": {
      "passed": 1,
      "total": 4
    },
    "system_tests": {
      "passed": 7,
      "total": 7
    },
    "test_duration": 9.020073
  },
  "core_constraints": {
    "narrative_coherence": {
      "scores": [
        82.5
      ],
      "average": 82.5,
      "requirement": "≥80%",
      "passed": true
    },
    "duration_control": {
      "scores": [
        100.0
      ],
      "average": 100.0,
      "requirement": "≥80%",
      "passed": true
    }
  },
  "performance_metrics": {
    "baseline_memory": {
      "rss": 21.2890625,
      "vms": 12.91796875,
      "percent": 0.1321430597737614
    },
    "current_memory": {
      "rss": 368.9296875,
      "vms": 795.80078125,
      "percent": 2.2899786097968198
    },
    "memory_increase": 347.640625,
    "memory_within_limit": true,
    "memory_leak_acceptable": false
  },
  "detailed_results": {
    "剧情连贯性-完整爱情剧": {
      "success": false,
      "details": "连贯性: 79.8%, 时长控制: 100.0%",
      "duration": 0.18989157676696777,
      "timestamp": "2025-07-30T07:23:50.131164",
      "memory_usage": {
        "rss": 31.85546875,
        "vms": 22.5078125,
        "percent": 0.19772966100092185
      },
      "metrics": {
        "连贯性评分": "79.8%",
        "时长控制评分": "100.0%",
        "原始时长": "75.0s",
        "重构时长": "22.5s",
        "压缩比例": "30.0%"
      }
    },
    "剧情连贯性-复杂悬疑剧": {
      "success": true,
      "details": "连贯性: 82.5%, 时长控制: 100.0%",
      "duration": 0.0,
      "timestamp": "2025-07-30T07:23:50.131164",
      "memory_usage": {
        "rss": 31.85546875,
        "vms": 22.5078125,
        "percent": 0.19772966100092185
      },
      "metrics": {
        "连贯性评分": "82.5%",
        "时长控制评分": "100.0%",
        "原始时长": "40.0s",
        "重构时长": "18.0s",
        "压缩比例": "45.0%"
      }
    },
    "剧情连贯性-短剧情": {
      "success": false,
      "details": "连贯性: 60.0%, 时长控制: 100.0%",
      "duration": 0.0,
      "timestamp": "2025-07-30T07:23:50.146825",
      "memory_usage": {
        "rss": 31.85546875,
        "vms": 22.5078125,
        "percent": 0.19772966100092185
      },
      "metrics": {
        "连贯性评分": "60.0%",
        "时长控制评分": "100.0%",
        "原始时长": "8.0s",
        "重构时长": "4.0s",
        "压缩比例": "50.0%"
      }
    },
    "时长控制精度": {
      "success": false,
      "details": "目标范围: True, 连贯性: False, 一致性: True",
      "duration": 0.004843711853027344,
      "timestamp": "2025-07-30T07:23:50.166066",
      "memory_usage": {
        "rss": 31.98046875,
        "vms": 22.5078125,
        "percent": 0.1985055468564742
      },
      "metrics": {
        "平均压缩比": "30.0%",
        "压缩比范围": "30.0%-30.0%",
        "压缩比标准差": "0.0%",
        "平均连贯性": "79.8%",
        "连贯性范围": "79.8%-79.8%",
        "连贯性标准差": "0.0%"
      }
    },
    "边缘情况-极短视频": {
      "success": true,
      "details": "结果类型: <class 'list'>, 长度: 2",
      "duration": 0.0009827613830566406,
      "timestamp": "2025-07-30T07:23:50.167931",
      "memory_usage": {
        "rss": 31.98046875,
        "vms": 22.5078125,
        "percent": 0.1985055468564742
      },
      "metrics": {
        "输入片段数": 4,
        "输出片段数": 2,
        "原始时长": "8.0s",
        "重构时长": "4.0s"
      }
    },
    "边缘情况-单句字幕": {
      "success": true,
      "details": "结果类型: <class 'list'>, 长度: 1",
      "duration": 0.0,
      "timestamp": "2025-07-30T07:23:50.167931",
      "memory_usage": {
        "rss": 31.98046875,
        "vms": 22.5078125,
        "percent": 0.1985055468564742
      },
      "metrics": {
        "输入片段数": 1,
        "输出片段数": 1,
        "原始时长": "2.0s",
        "重构时长": "2.0s"
      }
    },
    "边缘情况-空字幕": {
      "success": true,
      "details": "结果类型: <class 'list'>, 长度: 0",
      "duration": 0.0,
      "timestamp": "2025-07-30T07:23:50.168968",
      "memory_usage": {
        "rss": 31.98046875,
        "vms": 22.5078125,
        "percent": 0.1985055468564742
      },
      "metrics": {
        "输入片段数": 0,
        "输出片段数": 0
      }
    },
    "UI界面功能": {
      "success": true,
      "details": "语法: True, 导入: True",
      "duration": 5.891469955444336,
      "timestamp": "2025-07-30T07:23:56.061438",
      "memory_usage": {
        "rss": 337.75,
        "vms": 772.4140625,
        "percent": 2.0964435817024776
      },
      "metrics": {
        "UI文件语法": "✓",
        "UI类导入": "✓",
        "PyQt6框架": "✓"
      }
    },
    "核心功能模块": {
      "success": true,
      "details": "通过: 7/7",
      "duration": 1.865849494934082,
      "timestamp": "2025-07-30T07:23:57.932422",
      "memory_usage": {
        "rss": 368.70703125,
        "vms": 795.60546875,
        "percent": 2.2885965631166174
      },
      "metrics": {
        "模块-语言检测器": "✓",
        "模块-字幕解析器": "✓",
        "模块-剧本工程师": "✓",
        "模块-视频处理器": "✓",
        "模块-剪映导出器": "✓",
        "模块-模型切换器": "✓",
        "模块-叙事分析器": "✓",
        "通过率": "7/7 (100.0%)"
      }
    },
    "端到端工作流程": {
      "success": true,
      "details": "步骤通过: 5/5",
      "duration": 0.012023448944091797,
      "timestamp": "2025-07-30T07:23:57.945045",
      "memory_usage": {
        "rss": 368.91796875,
        "vms": 795.80078125,
        "percent": 2.289905870497862
      },
      "metrics": {
        "步骤-文件解析": "✓",
        "步骤-语言检测": "✓",
        "步骤-剧本重构": "✓",
        "步骤-视频处理器": "✓",
        "步骤-剪映导出器": "✓",
        "工作流程完整性": "5/5"
      }
    },
    "性能监控": {
      "success": true,
      "details": "内存: 368.9MB, CPU: 30.6%",
      "duration": 1.0094168186187744,
      "timestamp": "2025-07-30T07:23:58.955329",
      "memory_usage": {
        "rss": 368.92578125,
        "vms": 795.80078125,
        "percent": 2.289954363363834
      },
      "metrics": {
        "初始内存": "368.9MB",
        "最终内存": "368.9MB",
        "内存增长": "0.0MB",
        "CPU使用率": "30.6%",
        "内存限制检查": "✓",
        "内存泄漏检查": "✓"
      }
    }
  },
  "system_info": {
    "platform": "Windows",
    "python_version": "3.11.11 | packaged by Anaconda, Inc. | (main, Dec 11 2024, 16:34:19) [MSC v.1929 64 bit (AMD64)]",
    "cpu_count": 16,
    "total_memory": 15.733024597167969
  }
}