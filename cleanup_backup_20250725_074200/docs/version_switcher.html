<!-- Version Switcher Widget Template -->
<div class="md-version-select">
  <span class="md-version-select__label">版本:</span>
  <select id="version-selector" class="md-version-select__dropdown">
    <!-- Development version if available -->
    {% if config.extra.dev_version %}
    <option value="{{ base_url }}{{ config.extra.dev_version.path }}">
      {{ config.extra.dev_version.version }} ({{ config.extra.dev_version.description }})
    </option>
    {% endif %}
    
    <!-- Published versions -->
    {% for version in config.extra.published_versions %}
    <option value="{{ base_url }}{{ version.path }}" 
      {% if version.version == config.extra.current_version %}selected="selected"{% endif %}>
      {{ version.version }} ({{ version.code_name }})
      {% if version.version == config.extra.current_version %} - 当前版本{% endif %}
      {% if not version.supported %} - 不再支持{% endif %}
    </option>
    {% endfor %}
  </select>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    var selector = document.getElementById('version-selector');
    if (selector) {
      selector.addEventListener('change', function() {
        window.location.href = this.value;
      });
    }
    
    // Add version info to footer
    var footer = document.querySelector('.md-footer-meta');
    if (footer) {
      var versionInfo = document.createElement('div');
      versionInfo.className = 'md-footer-version';
      versionInfo.innerHTML = '<p>当前版本: {{ config.extra.current_version }} | ' +
        '<a href="{{ base_url }}{{ config.extra.version_aliases.latest }}/">最新版</a> | ' +
        '<a href="{{ base_url }}{{ config.extra.version_aliases.stable }}/">稳定版</a></p>';
      footer.appendChild(versionInfo);
    }
  });
</script> 