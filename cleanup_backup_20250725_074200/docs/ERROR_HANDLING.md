# VisionAI-ClipsMaster 错误处理手册

> 本文档是错误处理系统的主要参考手册。另请参阅：
> - [ERROR_CODES.md](ERROR_CODES.md) - 简化版错误代码速查表
> - [错误处理.md](错误处理.md) - 中文版错误处理指南

## 错误代码速查表

| 代码    | 严重等级 | 检查方法              | 处理建议                                    |
|---------|----------|----------------------|-------------------------------------------|
| 0xE100  | CRITICAL | 检查XML模板合法性      | 验证XML文件是否符合规范，检查必填字段和格式       |
| 0xE101  | HIGH     | 验证法律声明注入流程    | 确保法律免责声明文本已正确注入到输出媒体中      |
| 0xE102  | MEDIUM   | 禁用硬件加速或更新驱动  | 如果与GPU相关，尝试禁用硬件加速或更新显卡驱动  |

本文档详细记录了VisionAI-ClipsMaster应用中可能出现的所有错误代码，包括错误描述、严重程度、可能原因以及推荐的处理方法。

## 错误严重程度级别

- **CRITICAL**：关键错误，阻止应用正常运行或严重影响功能，通常需要立即处理。
- **ERROR**：一般错误，影响特定功能但不会导致整个应用崩溃。
- **WARNING**：警告级别错误，表示潜在问题但不会立即影响功能。
- **INFO**：信息级别错误，主要用于通知，通常不需要用户干预。

## 错误代码分类

错误代码按功能模块分组：

- **0xE0xx**：基础错误
- **0xE1xx**：文件操作错误
- **0xE2xx**：视频处理错误
- **0xE3xx**：字幕相关错误
- **0xE4xx**：模型相关错误
- **0xE5xx**：安全相关错误
- **0xE6xx**：资源相关错误
- **0xE7xx**：网络相关错误
- **0xE8xx**：权限和授权错误
- **0xEFxx**：一般错误

## 完整错误代码列表

### 基础错误 (0xE0xx)

| 代码 | 严重等级 | 检查方法 | 处理建议 |
|------|----------|----------|----------|
| 0xE100 | CRITICAL | 检查XML模板合法性 | 验证XML文件是否符合规范，检查必填字段和格式 |
| 0xE101 | HIGH | 验证法律声明注入流程 | 确保法律免责声明文本已正确注入到输出媒体中 |
| 0xE102 | MEDIUM | 禁用硬件加速或更新驱动 | 如果与GPU相关，尝试禁用硬件加速或更新显卡驱动 |
| 0xE000 | WARNING | 未知错误 | 查看日志获取详细信息，重启应用程序 |
| 0xE001 | CRITICAL | 初始化错误 | 检查配置文件，重新安装应用程序 |
| 0xE002 | WARNING | 配置错误 | 恢复默认配置或检查配置文件格式 |
| 0xE003 | WARNING | 权限错误 | 以管理员权限运行或检查文件权限设置 |
| 0xE004 | WARNING | 超时错误 | 检查网络连接，调整超时设置或重试 |
| 0xE005 | INFO | 验证错误 | 检查输入数据格式和内容 |
| 0xE006 | WARNING | 并发错误 | 减少同时任务数量或等待其他任务完成 |
| 0xE007 | WARNING | 网络错误 | 检查网络连接和相关服务状态 |

### 文件操作错误 (0xE1xx)

| 代码 | 严重等级 | 检查方法 | 处理建议 |
|------|----------|----------|----------|
| 0xE100 | WARNING | 文件未找到 | 检查文件路径，确认文件是否存在 |
| 0xE101 | WARNING | 文件访问被拒绝 | 检查文件权限，以管理员身份运行应用程序 |
| 0xE102 | WARNING | 文件格式错误 | 确保使用支持的文件格式 |
| 0xE103 | WARNING | 文件大小错误 | 检查文件大小限制，尝试分割大文件 |
| 0xE104 | WARNING | 文件操作错误 | 检查磁盘空间，确保文件未被其他程序锁定 |
| 0xE105 | ERROR | 文件写入错误 | 检查磁盘空间和写入权限 |
| 0xE106 | ERROR | 文件读取错误 | 检查文件是否损坏或被占用 |
| 0xE107 | WARNING | 临时文件错误 | 清理临时文件夹，确保有足够空间 |

### 视频处理错误 (0xE2xx)

| 代码 | 严重等级 | 检查方法 | 处理建议 |
|------|----------|----------|----------|
| 0xE200 | WARNING | 视频处理错误 | 检查视频文件完整性，尝试不同视频编码 |
| 0xE201 | WARNING | 视频解码错误 | 确保安装了视频解码器，尝试转换视频格式 |
| 0xE202 | WARNING | 视频编码错误 | 检查输出设置，尝试降低视频质量 |
| 0xE203 | INFO | 视频质量错误 | 使用更高质量的视频源，或调整处理参数 |
| 0xE204 | WARNING | 音频处理错误 | 检查音频轨道完整性，尝试提取和重新合并音频 |
| 0xE205 | ERROR | 视频帧提取错误 | 检查视频是否可以正常播放，可能需要修复视频文件 |
| 0xE206 | WARNING | 视频合成错误 | 检查输入素材格式是否一致，尝试中间格式转换 |
| 0xE207 | ERROR | GPU加速错误 | 更新显卡驱动，或尝试禁用GPU加速 |

### 字幕相关错误 (0xE3xx)

| 代码 | 严重等级 | 检查方法 | 处理建议 |
|------|----------|----------|----------|
| 0xE300 | WARNING | SRT格式错误 | 检查字幕文件格式，使用文本编辑器修正 |
| 0xE301 | WARNING | 字幕同步错误 | 调整字幕时间轴，使用字幕编辑工具 |
| 0xE302 | WARNING | 字幕编码错误 | 将字幕文件转换为UTF-8编码 |
| 0xE303 | WARNING | 字幕解析错误 | 检查字幕文件语法，修复格式错误 |
| 0xE304 | INFO | 字幕缺失错误 | 确保所有需要字幕的视频片段都有对应字幕 |
| 0xE305 | WARNING | 字幕渲染错误 | 检查字体文件，可能需要安装缺失字体 |
| 0xE306 | ERROR | 字幕提取错误 | 从视频中提取字幕失败，检查视频是否包含字幕轨道 |

### 模型相关错误 (0xE4xx)

| 代码 | 严重等级 | 检查方法 | 处理建议 |
|------|----------|----------|----------|
| 0xE400 | CRITICAL | 模型加载错误 | 检查模型文件是否存在且完整，尝试重新下载模型 |
| 0xE401 | ERROR | 模型推理错误 | 检查输入数据格式，可能需要重启应用程序 |
| 0xE402 | WARNING | 模型版本错误 | 确保使用兼容的模型版本 |
| 0xE403 | CRITICAL | CUDA错误 | 更新NVIDIA驱动，检查CUDA版本兼容性 |
| 0xE404 | ERROR | 模型精度错误 | 尝试使用不同精度的模型版本 |
| 0xE405 | WARNING | 模型参数错误 | 检查模型配置文件，恢复默认设置 |
| 0xE406 | ERROR | 模型内存错误 | 关闭其他应用释放内存，降低批处理大小 |
| 0xE407 | CRITICAL | 模型文件损坏 | 重新下载或恢复模型文件 |

### 安全相关错误 (0xE5xx)

| 代码 | 严重等级 | 检查方法 | 处理建议 |
|------|----------|----------|----------|
| 0xE500 | CRITICAL | 安全验证错误 | 检查文件完整性，可能需要重新安装应用 |
| 0xE501 | WARNING | 内容合规错误 | 检查内容是否符合合规要求，调整内容 |
| 0xE502 | CRITICAL | 加密错误 | 检查加密库是否正常，可能需要更新系统 |
| 0xE503 | WARNING | 隐私保护错误 | 确保敏感信息已被正确处理 |
| 0xE504 | ERROR | 签名验证错误 | 检查文件签名，确认文件来源可信 |
| 0xE505 | CRITICAL | 安全策略冲突 | 检查安全软件设置，添加应用到白名单 |

### 资源相关错误 (0xE6xx)

| 代码 | 严重等级 | 检查方法 | 处理建议 |
|------|----------|----------|----------|
| 0xE600 | CRITICAL | 资源耗尽 | 关闭其他应用程序，增加系统资源 |
| 0xE601 | CRITICAL | 内存错误 | 关闭其他程序，使用更小的模型或批处理大小 |
| 0xE602 | CRITICAL | 磁盘空间错误 | 清理磁盘空间，删除临时文件 |
| 0xE603 | WARNING | CPU过载 | 减少并行任务，使用计算需求较低的设置 |
| 0xE604 | ERROR | GPU资源错误 | 检查GPU是否可用，关闭其他使用GPU的应用 |
| 0xE605 | WARNING | 系统资源不足 | 增加系统分页文件大小，关闭不必要的后台程序 |
| 0xE606 | ERROR | 线程资源错误 | 减少并发线程数，等待其他处理完成 |

### 网络相关错误 (0xE7xx)

| 代码 | 严重等级 | 检查方法 | 处理建议 |
|------|----------|----------|----------|
| 0xE700 | WARNING | 网络连接失败 | 检查网络连接 |
| 0xE701 | WARNING | 服务器响应超时 | 稍后重试 |
| 0xE702 | WARNING | 下载失败 | 检查下载链接，确认有足够的磁盘空间 |
| 0xE703 | ERROR | 网络认证失败 | 检查账号和密码是否正确 |
| 0xE704 | WARNING | 网络带宽不足 | 关闭其他网络应用，或在网络空闲时重试 |
| 0xE705 | ERROR | 代理服务器错误 | 检查代理设置，或尝试直接连接 |
| 0xE706 | WARNING | DNS解析错误 | 检查DNS设置，或尝试使用其他DNS服务器 |

### 权限和授权错误 (0xE8xx)

| 代码 | 严重等级 | 检查方法 | 处理建议 |
|------|----------|----------|----------|
| 0xE800 | WARNING | 授权验证失败 | 检查许可证 |
| 0xE801 | WARNING | 许可证过期 | 续订许可证 |
| 0xE802 | WARNING | 功能未授权 | 升级账户或购买对应功能授权 |
| 0xE803 | ERROR | 用户权限不足 | 以管理员身份运行或增加用户权限 |
| 0xE804 | WARNING | 设备未授权 | 在授权管理中添加当前设备 |
| 0xE805 | ERROR | 授权数量超限 | 释放其他设备的授权或升级授权计划 |
| 0xE806 | CRITICAL | 授权验证服务不可用 | 联系技术支持或稍后重试 |

### 一般错误 (0xEFxx)

| 代码 | 严重等级 | 检查方法 | 处理建议 |
|------|----------|----------|----------|
| 0xEF00 | ERROR | 未知错误 | 联系技术支持 |
| 0xEF01 | INFO | 操作被用户取消 | 用户主动取消，无需特别处理 |
| 0xEF02 | WARNING | 版本不兼容 | 更新到兼容版本 |
| 0xEF03 | ERROR | 系统环境不兼容 | 检查系统要求，升级操作系统或依赖组件 |
| 0xEF04 | WARNING | 操作被中断 | 检查是否有其他程序干扰，或重新尝试操作 |
| 0xEF05 | ERROR | 内部逻辑错误 | 重启应用程序，若问题持续请联系技术支持 |

## 错误处理流程

遇到错误时，推荐按照以下步骤处理：

1. **记录错误信息**：记下错误代码和错误消息
2. **查阅文档**：根据错误代码在本文档中查找处理建议
3. **尝试解决**：按照处理建议尝试解决问题
4. **自动恢复**：对于标记为"CRITICAL"的错误，系统会尝试自动恢复
5. **联系支持**：如果问题无法解决，提供错误代码和详细情况联系技术支持

## 错误监控工具

VisionAI-ClipsMaster提供了实时错误监控看板，可帮助跟踪、分析和解决错误：

```python
from src.exporters.error_dashboard import get_error_monitor

# 获取错误监控看板实例
monitor = get_error_monitor()

# 启动监控
monitor.start_monitoring()

# 获取错误摘要
summary = monitor.get_error_summary()
print(f"错误状态: {summary['status']}")
print(f"总错误数: {summary['total_errors']}")
```

## 常见问题

**Q: 遇到模型相关错误（0xE4xx）怎么办？**

A: 大多数模型错误可以通过重新下载模型或检查模型配置解决。确保有足够的内存和磁盘空间。

**Q: 如何解决资源不足错误（0xE6xx）？**

A: 关闭其他内存密集型应用，减少批处理大小，或考虑升级系统硬件。

**Q: 网络错误（0xE7xx）一直出现怎么处理？**

A: 检查网络连接，尝试使用其他网络，或在网络稳定时重试。某些情况下可能需要配置代理或防火墙设置。

**Q: 为什么会出现权限错误（0xE8xx）？**

A: 通常是因为应用缺少必要权限或许可证问题。尝试以管理员身份运行，或检查账户授权状态。

## 错误报告

遇到无法解决的错误时，请收集以下信息并报告给开发团队：

1. 错误代码和错误消息
2. 操作系统版本和环境信息
3. 重现步骤
4. 日志文件（位于`logs/error_dashboard.log`）
5. 应用版本号

可以通过以下方式提交错误报告：
- 发送邮件至：support@visionai-clipsmaster.com
- 在GitHub仓库创建Issue: https://github.com/visionai-clipsmaster/issues

## 注意事项

- 对于涉及文件操作的错误，确保文件路径不包含特殊字符
- 在处理大型视频文件时，预留足够的系统资源
- 定期检查更新，许多错误可能在新版本中已修复
- 对于模型下载错误，可能需要使用稳定的网络环境或配置代理 