#!/usr/bin/env python
# -*- coding: utf-8 -*-
"""
VisionAI-ClipsMaster æ‰‹åŠ¨UIæµ‹è¯•æŒ‡å—
ç”¨äºæŒ‡å¯¼ç”¨æˆ·è¿›è¡Œæ‰‹åŠ¨äº¤äº’æµ‹è¯•
"""

import sys
import os
import time
from pathlib import Path

# è®¾ç½®é¡¹ç›®æ ¹ç›®å½•
PROJECT_ROOT = Path(__file__).resolve().parent
sys.path.append(str(PROJECT_ROOT))

def print_test_guide():
    """æ‰“å°æ‰‹åŠ¨æµ‹è¯•æŒ‡å—"""
    print("ğŸ¬ VisionAI-ClipsMaster æ‰‹åŠ¨UIæµ‹è¯•æŒ‡å—")
    print("=" * 60)
    print("è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œæ‰‹åŠ¨æµ‹è¯•ï¼Œå¹¶è®°å½•æ¯ä¸ªåŠŸèƒ½çš„å·¥ä½œçŠ¶æ€")
    print()
    
    print("ğŸ“‹ æµ‹è¯•æ¸…å•:")
    print()
    
    # ä¸»é¢˜åˆ‡æ¢æµ‹è¯•
    print("1. ä¸»é¢˜æ ·å¼æµ‹è¯•")
    print("   â–¡ æŸ¥çœ‹å½“å‰ç•Œé¢æ˜¯å¦ä¸ºæµ…è‰²ä¸»é¢˜")
    print("   â–¡ æ£€æŸ¥æŒ‰é’®ã€æ–‡æœ¬æ¡†ã€æ ‡ç­¾é¡µçš„æ ·å¼æ˜¯å¦æ­£å¸¸")
    print("   â–¡ éªŒè¯å›¾æ ‡å’Œé¢œè‰²æ­é…æ˜¯å¦åè°ƒ")
    print()
    
    # æ–‡ä»¶ä¸Šä¼ æµ‹è¯•
    print("2. æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½æµ‹è¯•")
    print("   â–¡ ç‚¹å‡»'é€‰æ‹©è§†é¢‘æ–‡ä»¶'æŒ‰é’®ï¼ŒéªŒè¯æ–‡ä»¶é€‰æ‹©å¯¹è¯æ¡†")
    print("   â–¡ å°è¯•é€‰æ‹©ä¸åŒæ ¼å¼çš„è§†é¢‘æ–‡ä»¶(.mp4, .avi, .movç­‰)")
    print("   â–¡ ç‚¹å‡»'å¯¼å…¥åŸå§‹SRT'æŒ‰é’®ï¼Œä¸Šä¼ å­—å¹•æ–‡ä»¶")
    print("   â–¡ ç‚¹å‡»'å¯¼å…¥çˆ†æ¬¾SRT'æŒ‰é’®ï¼Œä¸Šä¼ å‚è€ƒå­—å¹•")
    print("   â–¡ éªŒè¯æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®æ˜¾ç¤ºåœ¨ç•Œé¢ä¸Š")
    print()
    
    # è¯­è¨€æ¨¡å¼æµ‹è¯•
    print("3. è¯­è¨€æ¨¡å¼åˆ‡æ¢æµ‹è¯•")
    print("   â–¡ ç‚¹å‡»'è‡ªåŠ¨æ£€æµ‹'å•é€‰æŒ‰é’®")
    print("   â–¡ ç‚¹å‡»'ä¸­æ–‡æ¨¡å¼'å•é€‰æŒ‰é’®ï¼Œè§‚å¯Ÿæ˜¯å¦å¼¹å‡ºæ¨¡å‹ä¸‹è½½å¯¹è¯æ¡†")
    print("   â–¡ ç‚¹å‡»'è‹±æ–‡æ¨¡å¼'å•é€‰æŒ‰é’®ï¼Œè§‚å¯Ÿæ˜¯å¦å¼¹å‡ºæ¨¡å‹ä¸‹è½½å¯¹è¯æ¡†")
    print("   â–¡ åœ¨æ¨¡å‹ä¸‹è½½å¯¹è¯æ¡†ä¸­æµ‹è¯•'ç¡®å®š'å’Œ'å–æ¶ˆ'æŒ‰é’®")
    print()
    
    # å¤„ç†åŠŸèƒ½æµ‹è¯•
    print("4. è§†é¢‘å¤„ç†åŠŸèƒ½æµ‹è¯•")
    print("   â–¡ ç‚¹å‡»'å¼€å§‹å¤„ç†'æŒ‰é’®")
    print("   â–¡ è§‚å¯Ÿè¿›åº¦æ¡å’ŒçŠ¶æ€æ˜¾ç¤º")
    print("   â–¡ æ£€æŸ¥æ—¥å¿—è¾“å‡ºåŒºåŸŸçš„ä¿¡æ¯")
    print("   â–¡ æµ‹è¯•'åœæ­¢å¤„ç†'æŒ‰é’®ï¼ˆå¦‚æœæœ‰ï¼‰")
    print()
    
    # æ¨¡å‹è®­ç»ƒæµ‹è¯•
    print("5. æ¨¡å‹è®­ç»ƒåŠŸèƒ½æµ‹è¯•")
    print("   â–¡ åˆ‡æ¢åˆ°'æ¨¡å‹è®­ç»ƒ'æ ‡ç­¾é¡µ")
    print("   â–¡ æµ‹è¯•è®­ç»ƒæ•°æ®ä¸Šä¼ åŠŸèƒ½")
    print("   â–¡ è°ƒæ•´è®­ç»ƒå‚æ•°è®¾ç½®")
    print("   â–¡ ç‚¹å‡»'å¼€å§‹è®­ç»ƒ'æŒ‰é’®")
    print("   â–¡ è§‚å¯Ÿè®­ç»ƒè¿›åº¦å’Œæ—¥å¿—")
    print()
    
    # è®¾ç½®é¡µé¢æµ‹è¯•
    print("6. è®¾ç½®é¡µé¢åŠŸèƒ½æµ‹è¯•")
    print("   â–¡ åˆ‡æ¢åˆ°'è®¾ç½®'æ ‡ç­¾é¡µ")
    print("   â–¡ æµ‹è¯•FFmpegè·¯å¾„é…ç½®")
    print("   â–¡ è°ƒæ•´å†…å­˜é™åˆ¶è®¾ç½®")
    print("   â–¡ æµ‹è¯•å¿«æ·é”®é…ç½®")
    print("   â–¡ ä¿®æ”¹æ—¥å¿—çº§åˆ«è®¾ç½®")
    print("   â–¡ ç‚¹å‡»'ä¿å­˜è®¾ç½®'æŒ‰é’®")
    print()
    
    # äº¤äº’å“åº”æµ‹è¯•
    print("7. äº¤äº’å“åº”æ€§æµ‹è¯•")
    print("   â–¡ æµ‹è¯•é¼ æ ‡æ‚¬åœæ•ˆæœ")
    print("   â–¡ æµ‹è¯•æŒ‰é’®ç‚¹å‡»åé¦ˆ")
    print("   â–¡ å°è¯•å¿«æ·é”®æ“ä½œ")
    print("   â–¡ æµ‹è¯•å³é”®èœå•ï¼ˆå¦‚æœæœ‰ï¼‰")
    print("   â–¡ éªŒè¯æ‹–æ‹½åŠŸèƒ½ï¼ˆå¦‚æœæ”¯æŒï¼‰")
    print()
    
    # å¼‚å¸¸å¤„ç†æµ‹è¯•
    print("8. å¼‚å¸¸å¤„ç†æµ‹è¯•")
    print("   â–¡ å°è¯•ä¸Šä¼ æ— æ•ˆæ ¼å¼çš„æ–‡ä»¶")
    print("   â–¡ åœ¨æ²¡æœ‰é€‰æ‹©æ–‡ä»¶çš„æƒ…å†µä¸‹ç‚¹å‡»å¤„ç†")
    print("   â–¡ æµ‹è¯•ç½‘ç»œä¸­æ–­æƒ…å†µä¸‹çš„ç•Œé¢ååº”")
    print("   â–¡ è§‚å¯Ÿé”™è¯¯æç¤ºå¯¹è¯æ¡†")
    print()
    
    # çª—å£æ“ä½œæµ‹è¯•
    print("9. çª—å£æ“ä½œæµ‹è¯•")
    print("   â–¡ æ‹–æ‹½çª—å£è¾¹ç¼˜è°ƒæ•´å¤§å°")
    print("   â–¡ åŒå‡»æ ‡é¢˜æ æœ€å¤§åŒ–/è¿˜åŸ")
    print("   â–¡ ç‚¹å‡»æœ€å°åŒ–æŒ‰é’®")
    print("   â–¡ ç‚¹å‡»å…³é—­æŒ‰é’®")
    print()
    
    print("ğŸ“Š æµ‹è¯•è®°å½•è¡¨æ ¼:")
    print("-" * 60)
    print("| åŠŸèƒ½é¡¹ç›® | çŠ¶æ€ | å“åº”æ—¶é—´ | å¤‡æ³¨ |")
    print("|---------|------|----------|------|")
    print("| ä¸»é¢˜æ ·å¼ | â–¡ | ___s | ____ |")
    print("| æ–‡ä»¶ä¸Šä¼  | â–¡ | ___s | ____ |")
    print("| è¯­è¨€åˆ‡æ¢ | â–¡ | ___s | ____ |")
    print("| è§†é¢‘å¤„ç† | â–¡ | ___s | ____ |")
    print("| æ¨¡å‹è®­ç»ƒ | â–¡ | ___s | ____ |")
    print("| è®¾ç½®é¡µé¢ | â–¡ | ___s | ____ |")
    print("| äº¤äº’å“åº” | â–¡ | ___s | ____ |")
    print("| å¼‚å¸¸å¤„ç† | â–¡ | ___s | ____ |")
    print("| çª—å£æ“ä½œ | â–¡ | ___s | ____ |")
    print("-" * 60)
    print()
    
    print("âœ… çŠ¶æ€è¯´æ˜:")
    print("   âœ… PASS - åŠŸèƒ½æ­£å¸¸å·¥ä½œ")
    print("   âŒ FAIL - åŠŸèƒ½å­˜åœ¨é—®é¢˜")
    print("   âš ï¸ WARN - åŠŸèƒ½éƒ¨åˆ†å·¥ä½œæˆ–æœ‰è­¦å‘Š")
    print()
    
    print("â±ï¸ å“åº”æ—¶é—´ç›®æ ‡:")
    print("   æŒ‰é’®ç‚¹å‡»: â‰¤1ç§’")
    print("   æ ‡ç­¾é¡µåˆ‡æ¢: â‰¤0.5ç§’")
    print("   æ–‡ä»¶å¯¹è¯æ¡†: â‰¤2ç§’")
    print("   å¤„ç†å¼€å§‹: â‰¤3ç§’")
    print()

def create_test_files():
    """åˆ›å»ºæµ‹è¯•ç”¨çš„ç¤ºä¾‹æ–‡ä»¶"""
    print("ğŸ“ åˆ›å»ºæµ‹è¯•æ–‡ä»¶...")
    
    # åˆ›å»ºç¤ºä¾‹SRTæ–‡ä»¶
    sample_srt = """1
00:00:01,000 --> 00:00:05,000
æ¬¢è¿ä½¿ç”¨VisionAI-ClipsMaster

2
00:00:06,000 --> 00:00:10,000
è¿™æ˜¯ä¸€ä¸ªAIé©±åŠ¨çš„çŸ­å‰§æ··å‰ªå·¥å…·

3
00:00:11,000 --> 00:00:15,000
æ”¯æŒä¸­è‹±æ–‡åŒè¯­å¤„ç†

4
00:00:16,000 --> 00:00:20,000
Welcome to VisionAI-ClipsMaster

5
00:00:21,000 --> 00:00:25,000
AI-powered short drama remixing tool
"""
    
    # ä¿å­˜ç¤ºä¾‹æ–‡ä»¶
    test_dir = Path("test_files")
    test_dir.mkdir(exist_ok=True)
    
    srt_file = test_dir / "sample_original.srt"
    with open(srt_file, 'w', encoding='utf-8') as f:
        f.write(sample_srt)
    
    # åˆ›å»ºçˆ†æ¬¾ç¤ºä¾‹SRT
    viral_srt = """1
00:00:01,000 --> 00:00:03,000
éœ‡æƒŠï¼AIç«Ÿç„¶èƒ½è¿™æ ·å‰ªè§†é¢‘

2
00:00:04,000 --> 00:00:06,000
ä¸‰ç§’å­¦ä¼šçŸ­å‰§æ··å‰ªç¥æŠ€

3
00:00:07,000 --> 00:00:09,000
ä¸çœ‹åæ‚”ç³»åˆ—

4
00:00:10,000 --> 00:00:12,000
Amazing AI video editing

5
00:00:13,000 --> 00:00:15,000
You won't believe what happens next
"""
    
    viral_file = test_dir / "sample_viral.srt"
    with open(viral_file, 'w', encoding='utf-8') as f:
        f.write(viral_srt)
    
    print(f"âœ… æµ‹è¯•æ–‡ä»¶å·²åˆ›å»º:")
    print(f"   åŸå§‹SRT: {srt_file.absolute()}")
    print(f"   çˆ†æ¬¾SRT: {viral_file.absolute()}")
    print()

def launch_app_for_testing():
    """å¯åŠ¨åº”ç”¨ç¨‹åºè¿›è¡Œæµ‹è¯•"""
    print("ğŸš€ å¯åŠ¨VisionAI-ClipsMasterè¿›è¡Œæ‰‹åŠ¨æµ‹è¯•...")
    print()
    
    try:
        # å¯¼å…¥å¹¶å¯åŠ¨åº”ç”¨
        from PyQt6.QtWidgets import QApplication
        from simple_ui_fixed import SimpleScreenplayApp
        
        app = QApplication.instance()
        if app is None:
            app = QApplication(sys.argv)
        
        window = SimpleScreenplayApp()
        window.show()
        
        print("âœ… åº”ç”¨ç¨‹åºå·²å¯åŠ¨")
        print("ğŸ“‹ è¯·æŒ‰ç…§ä¸Šè¿°æµ‹è¯•æŒ‡å—è¿›è¡Œæ‰‹åŠ¨æµ‹è¯•")
        print("âŒ¨ï¸ æŒ‰ Ctrl+C é€€å‡ºæµ‹è¯•")
        print()
        
        return app.exec()
        
    except KeyboardInterrupt:
        print("\nğŸ›‘ ç”¨æˆ·ä¸­æ–­æµ‹è¯•")
        return 0
    except Exception as e:
        print(f"âŒ å¯åŠ¨å¤±è´¥: {e}")
        return 1

def main():
    """ä¸»å‡½æ•°"""
    print("ğŸ¯ VisionAI-ClipsMaster æ‰‹åŠ¨UIæµ‹è¯•å·¥å…·")
    print("=" * 60)
    print()
    
    # æ˜¾ç¤ºæµ‹è¯•æŒ‡å—
    print_test_guide()
    
    # åˆ›å»ºæµ‹è¯•æ–‡ä»¶
    create_test_files()
    
    # è¯¢é—®æ˜¯å¦å¯åŠ¨åº”ç”¨
    while True:
        choice = input("æ˜¯å¦ç°åœ¨å¯åŠ¨åº”ç”¨ç¨‹åºè¿›è¡Œæµ‹è¯•ï¼Ÿ(y/n): ").lower().strip()
        if choice in ['y', 'yes', 'æ˜¯']:
            return launch_app_for_testing()
        elif choice in ['n', 'no', 'å¦']:
            print("ğŸ“‹ è¯·æ‰‹åŠ¨å¯åŠ¨åº”ç”¨ç¨‹åºå¹¶æŒ‰ç…§æŒ‡å—è¿›è¡Œæµ‹è¯•")
            print("ğŸš€ å¯åŠ¨å‘½ä»¤: python simple_ui_fixed.py")
            return 0
        else:
            print("è¯·è¾“å…¥ y æˆ– n")

if __name__ == "__main__":
    sys.exit(main())
